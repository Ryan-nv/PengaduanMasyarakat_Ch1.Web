import{a as h}from"../../../_chunks/chunk-675WB7H3.js";import{e as x,f as P,g as f,h as o,i as p}from"../../../_chunks/chunk-4YTOLRBZ.js";import{a as w}from"../../../_chunks/chunk-TUOCPCYP.js";import{a as s,c as n,d as m,f as R,g}from"../../../_chunks/chunk-FEDAVPE7.js";var v=n(R(),1);var I=n(g(),1),e=n(R(),1);var l=class extends I.TemplatedDialog{constructor(t){super(t);this.permissions=new h(this.byId("Permissions"),{showRevoke:!1}),f.List({RoleID:this.options.roleID,Module:null,Submodule:null},D=>{this.permissions.value=D.Entities.map(a=>({PermissionKey:a}))}),this.permissions.implicitPermissions=(0,e.getRemoteData)("Administration.ImplicitPermissions")}getDialogOptions(){let t=super.getDialogOptions();return t.buttons=[{text:(0,e.localText)("Dialogs.OkButton"),click:D=>{f.Update({RoleID:this.options.roleID,Permissions:this.permissions.value.map(a=>a.PermissionKey),Module:null,Submodule:null},a=>{this.dialogClose(),window.setTimeout(()=>(0,e.notifySuccess)((0,e.localText)("Site.RolePermissionDialog.SaveSuccess")),0)})}},{text:(0,e.localText)("Dialogs.CancelButton"),click:()=>this.dialogClose()}],t.title=(0,e.format)((0,e.localText)("Site.RolePermissionDialog.DialogTitle"),this.options.title),t}getTemplate(){return'<div id="~_Permissions"></div>'}};s(l,"RolePermissionDialog");var c=n(g(),1);var S="edit-permissions",r=class extends c.EntityDialog{constructor(){super(...arguments);this.form=new P(this.idPrefix)}getFormKey(){return P.formKey}getIdProperty(){return o.idProperty}getLocalTextPrefix(){return o.localTextPrefix}getNameProperty(){return o.nameProperty}getService(){return p.baseUrl}getToolbarButtons(){let t=super.getToolbarButtons();return t.push({title:w.Site.RolePermissionDialog.EditButton,cssClass:S,icon:"fa-lock text-green",onClick:()=>{new l({roleID:this.entity.RoleId,title:this.entity.RoleName}).dialogOpen()}}),t}updateInterface(){super.updateInterface(),this.toolbar.findButton(S).toggleClass("disabled",this.isNewOrDeleted())}};s(r,"RoleDialog"),r=m([c.Decorators.registerClass("PengaduanMasyarakat.Administration.RoleDialog")],r);var u=n(g(),1);var i=class extends u.EntityGrid{getColumnsKey(){return x.columnsKey}getDialogType(){return r}getIdProperty(){return o.idProperty}getLocalTextPrefix(){return o.localTextPrefix}getService(){return p.baseUrl}constructor(d){super(d)}getDefaultSortBy(){return[o.Fields.RoleName]}};s(i,"RoleGrid"),i=m([u.Decorators.registerClass("PengaduanMasyarakat.Administration.RoleGrid")],i);$(function(){(0,v.initFullHeightGridPage)(new i($("#GridDiv")).element)});
//# sourceMappingURL=RolePage.js.map
